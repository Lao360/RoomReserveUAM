<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalendarze</title>
    <style>
        /* Dodaj tutaj swoje style */
    </style>
</head>
<body>
    <!-- Kalendarz miesięczny -->
    <div id="monthly-calendar">
        <h2 id="current-month-year"></h2>
        <button id="prev-month">Poprzedni miesiąc</button>
        <button id="next-month">Następny miesiąc</button>
        <button id="today-month">Dziś</button>
        <select id="month-select"></select>
        <select id="year-select"></select>
        <table id="calendar">
            <thead>
                <tr>
                    <th>Pn</th>
                    <th>Wt</th>
                    <th>Śr</th>
                    <th>Cz</th>
                    <th>Pt</th>
                    <th>Sob</th>
                    <th>Ndz</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
        <p id="selected-date-info">Wybrałeś: </p>
    </div>

    <!-- Kalendarz tygodniowy -->
    <div id="weekly-calendar">
        <h2>Kalendarz tygodniowy</h2>
        <button id="prev-week">Poprzedni tydzień</button>
        <button id="next-week">Następny tydzień</button>
        <button id="today-week">Dziś</button>
        <table id="week-calendar">
            <thead>
                <tr>
                    <th>Godzina</th>
                    <th>Poniedziałek</th>
                    <th>Wtorek</th>
                    <th>Środa</th>
                    <th>Czwartek</th>
                    <th>Piątek</th>
                    <th>Sobota</th>
                    <th>Niedziela</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>

    <script>
        // Namespace for monthly calendar
        var MonthlyCalendar = (function() {
            document.addEventListener('DOMContentLoaded', function() {
                var today = new Date();
                var currentMonth = today.getMonth();
                var currentYear = today.getFullYear();

                populateMonthDropdown();
                populateYearDropdown(currentYear - 100, currentYear + 100);

                document.getElementById('month-select').value = currentMonth;
                document.getElementById('year-select').value = currentYear;

                renderCalendar(currentYear, currentMonth);

                document.getElementById('prev-month').addEventListener('click', function() {
                    var [newMonth, newYear] = changeMonth(-1, currentMonth, currentYear);
                    currentMonth = newMonth;
                    currentYear = newYear;
                    updateDropdowns(currentMonth, currentYear);
                    renderCalendar(currentYear, currentMonth);
                });

                document.getElementById('next-month').addEventListener('click', function() {
                    var [newMonth, newYear] = changeMonth(1, currentMonth, currentYear);
                    currentMonth = newMonth;
                    currentYear = newYear;
                    updateDropdowns(currentMonth, currentYear);
                    renderCalendar(currentYear, currentMonth);
                });

                document.getElementById('today-month').addEventListener('click', function() {
                    currentMonth = today.getMonth();
                    currentYear = today.getFullYear();
                    updateDropdowns(currentMonth, currentYear);
                    renderCalendar(currentYear, currentMonth);
                });

                document.getElementById('month-select').addEventListener('change', function() {
                    currentMonth = parseInt(this.value);
                    renderCalendar(currentYear, currentMonth);
                });

                document.getElementById('year-select').addEventListener('change', function() {
                    currentYear = parseInt(this.value);
                    renderCalendar(currentYear, currentMonth);
                });
            });

            function renderCalendar(year, month) {
                var firstDay = new Date(year, month, 1);
                var lastDay = new Date(year, month + 1, 0);
                var numDays = lastDay.getDate();
                var startingDay = firstDay.getDay();

                startingDay = (startingDay === 0) ? 6 : startingDay - 1;

                var tableBody = document.querySelector('#calendar tbody');
                tableBody.innerHTML = '';

                var date = 1;
                for (var i = 0; i < 6; i++) {
                    var row = document.createElement('tr');

                    for (var j = 0; j < 7; j++) {
                        var cell = document.createElement('td');
                        if (i === 0 && j < startingDay) {
                            var cellText = document.createTextNode('');
                            cell.appendChild(cellText);
                        } else if (date > numDays) {
                            break;
                        } else {
                            cell.addEventListener('click', function() {
                                var selectedDate = new Date(year, month, this.textContent);
                                selectDate(selectedDate, year, month);
                            });
                            cell.textContent = date;
                            date++;
                        }
                        row.appendChild(cell);
                    }
                    tableBody.appendChild(row);
                }
                document.getElementById('current-month-year').textContent = getMonthName(month) + ' ' + year;
            }

            function selectDate(date, year, month) {
                var selectedCell = document.querySelector('.selected');
                if (selectedCell) {
                    selectedCell.classList.remove('selected');
                }
                var calendarCells = document.querySelectorAll('.calendar td');
                calendarCells.forEach(function(cell) {
                    var cellDate = new Date(year, month, cell.textContent);
                    if (cellDate.toDateString() === date.toDateString()) {
                        cell.classList.add('selected');
                    }
                });

                var day = date.getDate().toString().padStart(2, '0');
                var monthFormatted = (month + 1).toString().padStart(2, '0');
                var year = date.getFullYear();
                document.getElementById('selected-date-info').textContent = `Wybrałeś ${day}.${monthFormatted}.${year}`;
            }

            function getMonthName(month) {
                var months = ['Styczeń', 'Luty', 'Marzec', 'Kwiecień', 'Maj', 'Czerwiec', 'Lipiec', 'Sierpień', 'Wrzesień', 'Październik', 'Listopad', 'Grudzień'];
                return months[month];
            }

            function changeMonth(change, currentMonth, currentYear) {
                var newMonth = currentMonth + change;
                var newYear = currentYear;

                if (newMonth < 0) {
                    newMonth = 11;
                    newYear--;
                } else if (newMonth > 11) {
                    newMonth = 0;
                    newYear++;
                }

                return [newMonth, newYear];
            }

            function populateMonthDropdown() {
                var monthSelect = document.getElementById('month-select');
                var months = ['Styczeń', 'Luty', 'Marzec', 'Kwiecień', 'Maj', 'Czerwiec', 'Lipiec', 'Sierpień', 'Wrzesień', 'Październik', 'Listopad', 'Grudzień'];
                for (var i = 0; i < months.length; i++) {
                    var option = document.createElement('option');
                    option.value = i;
                    option.textContent = months[i];
                    monthSelect.appendChild(option);
                }
            }

            function populateYearDropdown(startYear, endYear) {
                var yearSelect = document.getElementById('year-select');
                for (var year = startYear; year <= endYear; year++) {
                    var option = document.createElement('option');
                    option.value = year;
                    option.textContent = year;
                    yearSelect.appendChild(option);
                }
            }

            function updateDropdowns(month, year) {
                document.getElementById('month-select').value = month;
                document.getElementById('year-select').value = year;
            }

            return {
                renderCalendar: renderCalendar,
                changeMonth: changeMonth,
                populateMonthDropdown: populateMonthDropdown,
                populateYearDropdown: populateYearDropdown,
                updateDropdowns: updateDropdowns
            };
        })();

        // Namespace for weekly calendar
        var WeeklyCalendar = (function() {
            document.addEventListener('DOMContentLoaded', function() {
                var currentMonday = getMonday(new Date());
                renderWeek(currentMonday);

                document.getElementById('today-week').addEventListener('click', function() {
                    currentMonday = getMonday(new Date());
                    renderWeek(currentMonday);
                });

                document.getElementById('prev-week').addEventListener('click', function() {
                    var prevMonday = new Date(currentMonday);
                    prevMonday.setDate(prevMonday.getDate() - 7);
                    currentMonday = prevMonday;
                    renderWeek(currentMonday);
                });

                document.getElementById('next-week').addEventListener('click', function() {
                    var nextMonday = new Date(currentMonday);
                    nextMonday.setDate(nextMonday.getDate() + 7);
                    currentMonday = nextMonday;
                    renderWeek(currentMonday);
                });

                document.getElementById('event-form').addEventListener('submit', function(event) {
                    event.preventDefault();
                    addEvent();
                });
            });

            function renderWeek(monday) {
                var tableBody = document.querySelector('#week-calendar tbody');
                tableBody.innerHTML = '';

                var rowHours = ['6:00', '7:00', '8:00', '9:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00', '19:00', '20:00', '21:00'];

                for (var hour of rowHours) {
                    var row = document.createElement('tr');
                    row.innerHTML = '<td>' + hour + '</td>';
                    for (var i = 0; i < 7; i++) {
                        var cell = document.createElement('td');
                        var cellDate = new Date(monday.getFullYear(), monday.getMonth(), monday.getDate() + i, parseInt(hour), 0);
                        cell.dataset.date = cellDate;
                        cell.dataset.hour = hour;
                        cell.appendChild(document.createTextNode(''));
                        row.appendChild(cell);
                    }
                    tableBody.appendChild(row);
                }

                var firstDayOfWeek = new Date(monday);
                var currentDay = new Date(monday);

                var row = document.createElement('tr');
                var emptyCell = document.createElement('th');
                emptyCell.textContent = '';
                row.appendChild(emptyCell);

                for (var i = 0; i < 7; i++) {
                    var cellDate = new Date(currentDay);
                    var dayOfWeek = cellDate.toLocaleDateString('pl-PL', { weekday: 'long' });
                    var dayOfMonth = cellDate.getDate();
                    var month = cellDate.getMonth() + 1;
                    var year = cellDate.getFullYear();

                    var columnHeader = document.createElement('th');
                    columnHeader.textContent = `${dayOfWeek} (${dayOfMonth}.${month}.${year})`;
                    firstDayOfWeek.setDate(firstDayOfWeek.getDate() + 1);
                    currentDay = firstDayOfWeek;
                    row.appendChild(columnHeader);
                }
                tableBody.insertBefore(row, tableBody.firstChild);
            }

            function getMonday(date) {
                var day = date.getDay() || 7;
                if (day !== 1) {
                    date.setHours(-24 * (day - 1));
                }
                return date;
            }

            return {
                renderWeek: renderWeek,
                getMonday: getMonday
            };
        })();
    </script>
</body>
</html>
